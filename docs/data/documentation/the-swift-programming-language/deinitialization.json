{"sections":[],"schemaVersion":{"major":0,"minor":3,"patch":0},"kind":"article","primaryContentSections":[{"kind":"content","content":[{"inlineContent":[{"text":"A ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"deinitializer"}]},{"type":"text","text":" is called immediately before a class instance is deallocated."},{"type":"text","text":" "},{"type":"text","text":"You write deinitializers with the "},{"type":"codeVoice","code":"deinit"},{"type":"text","text":" keyword,"},{"type":"text","text":" "},{"text":"similar to how initializers are written with the ","type":"text"},{"code":"init","type":"codeVoice"},{"type":"text","text":" keyword."},{"text":" ","type":"text"},{"type":"text","text":"Deinitializers are only available on class types."}],"type":"paragraph"},{"text":"Cómo funciona la desinicialización","level":2,"type":"heading","anchor":"C%C3%B3mo-funciona-la-desinicializaci%C3%B3n"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift automatically deallocates your instances when they’re no longer needed,"},{"type":"text","text":" "},{"type":"text","text":"to free up resources."},{"type":"text","text":" "},{"text":"Swift handles the memory management of instances through","type":"text"},{"type":"text","text":" "},{"type":"emphasis","inlineContent":[{"text":"automatic reference counting","type":"text"}]},{"type":"text","text":" ("},{"inlineContent":[{"type":"text","text":"ARC"}],"type":"emphasis"},{"type":"text","text":"),"},{"type":"text","text":" "},{"type":"text","text":"as described in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.swift.tspl\/documentation\/The-Swift-Programming-Language\/AutomaticReferenceCounting"},{"text":".","type":"text"},{"type":"text","text":" "},{"text":"Typically you don’t need to perform manual cleanup when your instances are deallocated.","type":"text"},{"text":" ","type":"text"},{"text":"However, when you are working with your own resources,","type":"text"},{"type":"text","text":" "},{"text":"you might need to perform some additional cleanup yourself.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"For example, if you create a custom class to open a file and write some data to it,"},{"text":" ","type":"text"},{"text":"you might need to close the file before the class instance is deallocated.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Class definitions can have at most one deinitializer per class.","type":"text"},{"type":"text","text":" "},{"text":"The deinitializer doesn’t take any parameters","type":"text"},{"type":"text","text":" "},{"text":"and is written without parentheses:","type":"text"}]},{"syntax":"swift","code":["deinit {","    \/\/ perform the deinitialization","}"],"type":"codeListing"},{"inlineContent":[{"text":"Deinitializers are called automatically, just before instance deallocation takes place.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"You aren’t allowed to call a deinitializer yourself."},{"type":"text","text":" "},{"text":"Superclass deinitializers are inherited by their subclasses,","type":"text"},{"type":"text","text":" "},{"text":"and the superclass deinitializer is called automatically at the end of","type":"text"},{"type":"text","text":" "},{"text":"a subclass deinitializer implementation.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Superclass deinitializers are always called,"},{"text":" ","type":"text"},{"type":"text","text":"even if a subclass doesn’t provide its own deinitializer."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Because an instance isn’t deallocated until after its deinitializer is called,","type":"text"},{"text":" ","type":"text"},{"text":"a deinitializer can access all properties of the instance it’s called on","type":"text"},{"type":"text","text":" "},{"text":"and can modify its behavior based on those properties","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"(such as looking up the name of a file that needs to be closed)."}]},{"level":2,"text":"Desinicializadores en acción","type":"heading","anchor":"Desinicializadores-en-acci%C3%B3n"},{"type":"paragraph","inlineContent":[{"text":"Here’s an example of a deinitializer in action.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"This example defines two new types, "},{"code":"Bank","type":"codeVoice"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Player"},{"text":", for a simple game.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The "},{"code":"Bank","type":"codeVoice"},{"type":"text","text":" class manages a made-up currency,"},{"type":"text","text":" "},{"type":"text","text":"which can never have more than 10,000 coins in circulation."},{"text":" ","type":"text"},{"text":"There can only ever be one ","type":"text"},{"type":"codeVoice","code":"Bank"},{"type":"text","text":" in the game,"},{"text":" ","type":"text"},{"type":"text","text":"and so the "},{"type":"codeVoice","code":"Bank"},{"type":"text","text":" is implemented as a class with type properties and methods"},{"text":" ","type":"text"},{"type":"text","text":"to store and manage its current state:"}]},{"type":"codeListing","code":["class Bank {","    static var coinsInBank = 10_000","    static func distribute(coins numberOfCoinsRequested: Int) -> Int {","        let numberOfCoinsToVend = min(numberOfCoinsRequested, coinsInBank)","        coinsInBank -= numberOfCoinsToVend","        return numberOfCoinsToVend","    }","    static func receive(coins: Int) {","        coinsInBank += coins","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Bank"},{"text":" keeps track of the current number of coins it holds with its ","type":"text"},{"type":"codeVoice","code":"coinsInBank"},{"type":"text","text":" property."},{"type":"text","text":" "},{"text":"It also offers two methods — ","type":"text"},{"type":"codeVoice","code":"distribute(coins:)"},{"type":"text","text":" and "},{"code":"receive(coins:)","type":"codeVoice"},{"text":" —","type":"text"},{"type":"text","text":" "},{"text":"to handle the distribution and collection of coins.","type":"text"}]},{"inlineContent":[{"text":"The ","type":"text"},{"code":"distribute(coins:)","type":"codeVoice"},{"type":"text","text":" method checks that there are enough coins in the bank before distributing them."},{"text":" ","type":"text"},{"type":"text","text":"If there aren’t enough coins,"},{"type":"text","text":" "},{"type":"codeVoice","code":"Bank"},{"text":" returns a smaller number than the number that was requested","type":"text"},{"type":"text","text":" "},{"type":"text","text":"(and returns zero if no coins are left in the bank)."},{"text":" ","type":"text"},{"type":"text","text":"It returns an integer value to indicate the actual number of coins that were provided."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"receive(coins:)"},{"type":"text","text":" method simply adds the received number of coins back into the bank’s coin store."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"Player"},{"text":" class describes a player in the game.","type":"text"},{"text":" ","type":"text"},{"text":"Each player has a certain number of coins stored in their purse at any time.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"This is represented by the player’s "},{"type":"codeVoice","code":"coinsInPurse"},{"text":" property:","type":"text"}]},{"syntax":"swift","code":["class Player {","    var coinsInPurse: Int","    init(coins: Int) {","        coinsInPurse = Bank.distribute(coins: coins)","    }","    func win(coins: Int) {","        coinsInPurse += Bank.distribute(coins: coins)","    }","    deinit {","        Bank.receive(coins: coinsInPurse)","    }","}"],"type":"codeListing"},{"inlineContent":[{"text":"Each ","type":"text"},{"type":"codeVoice","code":"Player"},{"text":" instance is initialized with a starting allowance of","type":"text"},{"type":"text","text":" "},{"text":"a specified number of coins from the bank during initialization,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"although a "},{"code":"Player","type":"codeVoice"},{"text":" instance may receive fewer than that number","type":"text"},{"text":" ","type":"text"},{"text":"if not enough coins are available.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The "},{"code":"Player","type":"codeVoice"},{"type":"text","text":" class defines a "},{"type":"codeVoice","code":"win(coins:)"},{"type":"text","text":" method,"},{"type":"text","text":" "},{"type":"text","text":"which retrieves a certain number of coins from the bank"},{"type":"text","text":" "},{"text":"and adds them to the player’s purse.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The "},{"code":"Player","type":"codeVoice"},{"type":"text","text":" class also implements a deinitializer,"},{"type":"text","text":" "},{"text":"which is called just before a ","type":"text"},{"code":"Player","type":"codeVoice"},{"text":" instance is deallocated.","type":"text"},{"text":" ","type":"text"},{"text":"Here, the deinitializer simply returns all of the player’s coins to the bank:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["var playerOne: Player? = Player(coins: 100)","print(\"A new player has joined the game with \\(playerOne!.coinsInPurse) coins\")","\/\/ Prints \"A new player has joined the game with 100 coins\"","print(\"There are now \\(Bank.coinsInBank) coins left in the bank\")","\/\/ Prints \"There are now 9900 coins left in the bank\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A new "},{"code":"Player","type":"codeVoice"},{"text":" instance is created, with a request for 100 coins if they’re available.","type":"text"},{"type":"text","text":" "},{"text":"This ","type":"text"},{"type":"codeVoice","code":"Player"},{"text":" instance is stored in an optional ","type":"text"},{"type":"codeVoice","code":"Player"},{"text":" variable called ","type":"text"},{"code":"playerOne","type":"codeVoice"},{"text":".","type":"text"},{"type":"text","text":" "},{"type":"text","text":"An optional variable is used here, because players can leave the game at any point."},{"text":" ","type":"text"},{"text":"The optional lets you track whether there’s currently a player in the game.","type":"text"}]},{"inlineContent":[{"type":"text","text":"Because "},{"code":"playerOne","type":"codeVoice"},{"type":"text","text":" is an optional, it’s qualified with an exclamation point ("},{"code":"!","type":"codeVoice"},{"text":")","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"when its "},{"code":"coinsInPurse","type":"codeVoice"},{"type":"text","text":" property is accessed to print its default number of coins,"},{"text":" ","type":"text"},{"type":"text","text":"and whenever its "},{"type":"codeVoice","code":"win(coins:)"},{"type":"text","text":" method is called:"}],"type":"paragraph"},{"code":["playerOne!.win(coins: 2_000)","print(\"PlayerOne won 2000 coins & now has \\(playerOne!.coinsInPurse) coins\")","\/\/ Prints \"PlayerOne won 2000 coins & now has 2100 coins\"","print(\"The bank now only has \\(Bank.coinsInBank) coins left\")","\/\/ Prints \"The bank now only has 7900 coins left\""],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here, the player has won 2,000 coins."},{"type":"text","text":" "},{"type":"text","text":"The player’s purse now contains 2,100 coins,"},{"type":"text","text":" "},{"text":"and the bank has only 7,900 coins left.","type":"text"}]},{"code":["playerOne = nil","print(\"PlayerOne has left the game\")","\/\/ Prints \"PlayerOne has left the game\"","print(\"The bank now has \\(Bank.coinsInBank) coins\")","\/\/ Prints \"The bank now has 10000 coins\""],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"The player has now left the game.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"This is indicated by setting the optional "},{"code":"playerOne","type":"codeVoice"},{"type":"text","text":" variable to "},{"code":"nil","type":"codeVoice"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"meaning “no ","type":"text"},{"type":"codeVoice","code":"Player"},{"text":" instance.”","type":"text"},{"type":"text","text":" "},{"type":"text","text":"At the point that this happens,"},{"type":"text","text":" "},{"type":"text","text":"the "},{"type":"codeVoice","code":"playerOne"},{"text":" variable’s reference to the ","type":"text"},{"code":"Player","type":"codeVoice"},{"type":"text","text":" instance is broken."},{"type":"text","text":" "},{"type":"text","text":"No other properties or variables are still referring to the "},{"code":"Player","type":"codeVoice"},{"text":" instance,","type":"text"},{"type":"text","text":" "},{"text":"and so it’s deallocated in order to free up its memory.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Just before this happens, its deinitializer is called automatically,"},{"type":"text","text":" "},{"text":"and its coins are returned to the bank.","type":"text"}],"type":"paragraph"},{"content":[{"inlineContent":[{"type":"text","text":""}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Esta documentación contiene información preliminar sobre una API o tecnología en desarrollo. Esta información está sujeta a cambios, y todo software implementado en conformidad con esta documentación debe ser testeado con el software final del sistema operativo."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Conoce más acerca del uso del "},{"identifier":"https:\/\/developer.apple.com\/es\/support\/beta-software\/","isActive":true,"type":"reference"},{"type":"text","text":"."}],"type":"paragraph"}],"name":"Software Beta","style":"note","type":"aside"}]}],"hierarchy":{"paths":[["doc:\/\/org.swift.tspl\/documentation\/The-Swift-Programming-Language"]]},"metadata":{"title":"Desinicialización"},"abstract":[{"type":"text","text":"Release resources that require custom cleanup."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/org.swift.tspl\/documentation\/The-Swift-Programming-Language\/Deinitialization"},"references":{"doc://org.swift.tspl/documentation/The-Swift-Programming-Language/AutomaticReferenceCounting":{"url":"\/documentation\/the-swift-programming-language\/automaticreferencecounting","kind":"article","type":"topic","identifier":"doc:\/\/org.swift.tspl\/documentation\/The-Swift-Programming-Language\/AutomaticReferenceCounting","abstract":[{"type":"text","text":"Model the lifetime of objects and their relationships."}],"title":"Conteo automático de referencias","role":"article"},"https://developer.apple.com/es/support/beta-software/":{"title":"software beta de Apple","type":"link","titleInlineContent":[{"type":"text","text":"software beta de Apple"}],"identifier":"https:\/\/developer.apple.com\/es\/support\/beta-software\/","url":"https:\/\/developer.apple.com\/es\/support\/beta-software\/"},"doc://org.swift.tspl/documentation/The-Swift-Programming-Language":{"title":"The Swift Programming Language (5.9)","kind":"article","identifier":"doc:\/\/org.swift.tspl\/documentation\/The-Swift-Programming-Language","type":"topic","url":"\/documentation\/the-swift-programming-language","abstract":[],"role":"collection"}}}